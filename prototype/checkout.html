<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/css/style.css">
    <script type="module" src="./src/js/main.js"></script>
    <title>Checkout</title>
</head>

<body>
    <div id="navbar"></div>
    <div class="mt-30 py-30 px-60">
        <div
            class="w-full h-full bg-linear-to-b from-primary to-primary-gradient px-50 py-30 flex flex-col gap-5 rounded-3xl shadow-lg">
            <div class="flex justify-between items-center">
                <div class="text-2xl">
                    <form class="flex flex-col gap-2" action="order">
                        <label for="firstName" class="text-white">Voornaam</label>
                        <input type="text" class="bg-white/70 rounded-xl w-2/3 text-black px-2 py-1 focus:outline-none">
                        <label for="surName" class="text-white">Achternaam</label>
                        <input type="text" class="bg-white/70 rounded-xl w-2/3 text-black px-2 py-1 focus:outline-none">
                        <label for="email" class="text-white">E-mailadres</label>
                        <input type="email"
                            class="bg-white/70 rounded-xl w-2/3 text-black px-2 py-1 focus:outline-none">
                        <label for="pickup" class="text-white">Afhaal Locatie</label>
                        <select name="locaties" id="locaties"
                            class="bg-white/70 rounded-xl w-2/3 text-black px-2 py-1 focus:outline-none">
                            <option value="0" selected disabled>Kies locatie</option>
                            <option value="1">Winschoten</option>
                            <option value="2">Groningen</option>
                            <option value="3">Stadskanaal</option>
                            <option value="4">Hoogezand</option>
                        </select>
                    </form>
                </div>
                <div
                    class="flex gap-8 justify-between bg-linear-to-b from-secondary-gradient to-secondary px-4 py-12 rounded-3xl text-2xl text-slatebg-gray-300/70 text-white w-116">
                    <div class="ps-10 flex flex-col gap-3">
                        <p>Kerst Eierbal <span id="ammountBal">1</span></p>
                        <p>BTW 9%</p>
                        <p>Donatie</p>
                        <p class="hidden" id="verzenden">Verzendkosten</p>
                        <p>Totaal</p>
                    </div>
                    <div class="pe-10 flex flex-col gap-3">
                        <p id="priceBal"></p>
                        <p id="BTW"></p>
                        <p id="donatieBedrag"></p>
                        <p id="verzendKosten" class="hidden"></p>
                        <p id="totaalBedrag"></p>
                    </div>
                </div>
            </div>
            <div class="flex flex-col gap-2">
                <div id="toggleShipping" class="flex justify-start items-center gap-4 cursor-pointer">
                    <p class="text-2xl text-white">Toch versturen?</p>
                    <img id="chevronIcon" class="w-10 transition-transform duration-300 ease-in-out"
                        src="./src/img/ChevronDown.svg" alt="chevron down">
                </div>
                <div id="shippingForm" class="hidden overflow-hidden transition-all duration-500 ease-in-out">
                    <form class="text-2xl flex flex-col gap-2 text-white" action="addres">
                        <div class="flex justify-between">
                            <div class="flex flex-col gap-2">
                                <label for="street">Straat & Huisnummer</label>
                                <input id="streetInput" type="text"
                                    class="bg-white/70 rounded-xl text-black px-2 py-1 focus:outline-none">
                            </div>
                            <div class="flex flex-col gap-2">
                                <label for="zipcode">Postcode</label>
                                <input id="zipcodeInput" type="text"
                                    class="bg-white/70 rounded-xl text-black px-2 py-1 focus:outline-none">
                            </div>
                        </div>
                        <div class="flex flex-col gap-2">
                            <label for="plaats">Plaats</label>
                            <input id="cityInput" type="text"
                                class="bg-white/70 rounded-xl text-black px-2 py-1 focus:outline-none w-116">
                        </div>
                    </form>
                </div>
            </div>
            <div class="flex flex-col gap-8">
                <div class="flex flex-col gap-4">
                    <div id="toggleDonation" class="flex justify-start items-center gap-4 cursor-pointer">
                        <p class="text-2xl text-white">Extra Doneren?</p>
                        <img id="chevronDonation" class="w-10 transition-transform duration-300 ease-in-out"
                            src="./src/img/ChevronDown.svg" alt="chevron down">
                    </div>
                    <div id="donationForm" class="hidden overflow-hidden transition-all duration-500 ease-in-out">
                        <div class="flex items-center gap-4">
                            <input type="number" id="donationInput" min="0" step="0.05" value="0"
                                class="bg-white/70 rounded-xl text-black px-4 py-2 focus:outline-none text-xl w-48"
                                placeholder="€0,00">
                        </div>
                    </div>
                </div>
                <button id="bestelButton"
                    class="bg-secondary hover:bg-secondary-gradient ease-in-out duration-300 text-white text-xl font-bold py-3 px-8 rounded-xl transition-colors cursor-pointer">Bestel</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="orderModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center gap-4 z-50">
        <div class="bg-linear-to-b from-secondary-gradient to-secondary px-24 py-30 rounded-3xl shadow-lg text-center">
            <p class="text-4xl text-white font-bold font-heading">Bestelling verwerkt!!</p>
            <p id="deliveryMessage" class="text-4xl text-white font-bold font-heading">U ontvangt een mailtje zodra het
                pakket klaar ligt</p>
        </div>
    </div>

    <div id="footer"></div>

    <script>
        // Modal functionality
        const bestelButton = document.getElementById('bestelButton');
        const orderModal = document.getElementById('orderModal');
        const deliveryMessage = document.getElementById('deliveryMessage');
        const streetInput = document.getElementById('streetInput');
        const zipcodeInput = document.getElementById('zipcodeInput');
        const cityInput = document.getElementById('cityInput');
        const verzendKostenLabel = document.getElementById('verzenden');
        const verzendKostenElement = document.getElementById('verzendKosten');
        const shippingCost = 10.00;

        // Function to check if address is filled
        function checkAddressAndUpdateShipping() {
            const hasAddress = streetInput.value.trim() !== '' &&
                zipcodeInput.value.trim() !== '' &&
                cityInput.value.trim() !== '';

            if (hasAddress) {
                // Show shipping costs
                verzendKostenLabel.classList.remove('hidden');
                verzendKostenElement.classList.remove('hidden');
                verzendKostenElement.textContent = '€10,00';
            } else {
                // Hide shipping costs
                verzendKostenLabel.classList.add('hidden');
                verzendKostenElement.classList.add('hidden');
                verzendKostenElement.textContent = '';
            }
        }

        // Add event listeners to address inputs
        streetInput.addEventListener('input', checkAddressAndUpdateShipping);
        zipcodeInput.addEventListener('input', checkAddressAndUpdateShipping);
        cityInput.addEventListener('input', checkAddressAndUpdateShipping);

        bestelButton.addEventListener('click', () => {
            // Check if shipping address is filled in
            const hasAddress = streetInput.value.trim() !== '' &&
                zipcodeInput.value.trim() !== '' &&
                cityInput.value.trim() !== '';

            // Update message based on whether address is filled
            if (hasAddress) {
                deliveryMessage.textContent = 'U ontvangt een mailtje zodra het pakket wordt verstuurd';
            } else {
                deliveryMessage.textContent = 'U ontvangt een mailtje zodra het pakket klaar ligt';
            }

            orderModal.classList.remove('hidden');

            // Auto-close modal after 2 seconds
            setTimeout(() => {
                orderModal.classList.add('hidden');
            }, 4000);
        });

        // Close modal when clicking outside
        orderModal.addEventListener('click', (e) => {
            if (e.target === orderModal) {
                orderModal.classList.add('hidden');
            }
        });
    </script>
</body>

</html>